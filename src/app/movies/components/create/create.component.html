<h2>Ajouter un film</h2>

<form [formGroup]="fg" (ngSubmit)=submitForm()>

    <p>Titre: <input nbInput formControlName="title" type="text"> </p>
    <p>Description: <input nbInput formControlName="description" type="text"></p>
    <p>Année de sortie: <input nbInput formControlName="releaseYear" type="number" ></p>
    <p>
      <nb-select formControlName="scenarist" placeholder="Sélectionnez un scénariste">
        <nb-option *ngFor="let person of listPerson" value="{{person.id}}">{{person.firstName}} {{person.lastName}}</nb-option>
      </nb-select>
    </p>
    <p>
      <nb-select formControlName="realisator" placeholder="Sélectionnez un réalisateur">
        <nb-option *ngFor="let person of listPerson" value="{{person.id}}">{{person.firstName}} {{person.lastName}}</nb-option>
      </nb-select>
    </p>

    <p><button nbButton type="button" (click)="addRole()" nbButton size="tiny">Ajouter un rôle</button></p>

    
    <nb-list *ngIf="getRoles().controls" formArrayName="actors">
        <nb-list-item *ngFor="let c of getRoles().controls; let i = index">
          <div [formGroupName]="i">
            Acteur {{i+1}} &nbsp;<input [status]="c.touched ? 'success' : 'warning'" nbInput type="text" formControlName="role">

            &nbsp;

            <nb-select formControlName="personId" placeholder="Sélectionnez un acteur">
              <nb-option *ngFor="let person of listPerson" value="{{person.id}}">{{person.firstName}} {{person.lastName}}</nb-option>
            </nb-select>

            &nbsp; 
            
            <button nbButton status="danger" (click)="removeRole(i)">X</button>
          </div>
        </nb-list-item>
    </nb-list>
 

    <button nbButton status="success" type="submit">Valider</button>

</form>


